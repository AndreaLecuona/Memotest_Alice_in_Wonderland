(()=>{"use strict";var e=document.querySelector(".intro"),t=document.querySelector(".text-welcome"),n=document.querySelector(".text-rules"),r=document.querySelector(".text-rules .title"),o=document.querySelector(".text-rules .helper"),c=document.querySelectorAll(".btn-wrapper button"),i=document.querySelector(".quit"),a=document.querySelector(".win"),u=document.querySelector(".lose"),l=!0,s=[{currentMode:"garden",title:"Flower Garden",rules:"You can wander around until you got all card pairs revealed. No pressure at all.",color:"#44b0b1"},{currentMode:"trial",title:"Tarts trial",rules:"Hurry up! You only got 1 minute to reveal all card pairs before the Queen of hearts declares you guilty",color:"#e62255"},{currentMode:"mad",title:"Mad tea-party",rules:"You must reveal all card pairs to win, but be careful, every now and then cards like to change their place on the table, because you know... we're all mad here!",color:"#f4cb56"}],d=function(e){var c=e.target.textContent;e.target.textContent="Play me",setTimeout((function(){e.target.textContent=c}),2e3);var i=this.dataset.mode,a=s.find((function(e){if(e.currentMode===i)return e})),u=a.title,l=a.rules,d=a.color;r.textContent=u,r.style.color=d,o.textContent=l,v(t),h(n)},f=function(){h(t),v(n)},m=function(e){switch(e.target.dataset.mode){case"garden":y();break;case"trial":y(),A();break;case"mad":y(),W();break;default:console.log("error in mode selection")}};c.forEach((function(e){return e.addEventListener("mouseenter",d)})),c.forEach((function(e){return e.addEventListener("mouseleave",f)})),c.forEach((function(e){return e.addEventListener("click",m)})),window.innerWidth<=768&&(c.forEach((function(e){return e.removeEventListener("mouseenter",d)})),c.forEach((function(e){return e.removeEventListener("mouseleave",f)})));var v=function(e){return e.classList.add("hide")},h=function(e){return e.classList.remove("hide")},y=function(){C(),v(e),h(i),l=!1};i.addEventListener("click",(function(){C(),l=!0}));var E,L,g=document.querySelectorAll(".card"),b=!1,p=0,k=function(){l||this!==E&&(this.classList.toggle("flip"),b?(L=this,q()):(b=!0,E=this))},q=function(){E.dataset.icon===L.dataset.icon?w():S()},w=function(){E.removeEventListener("click",k),L.removeEventListener("click",k),p++,M(),T()},S=function(){l=!0,setTimeout((function(){E.classList.remove("flip"),L.classList.remove("flip"),T()}),1500)},x=function(){g.forEach((function(e){var t=Math.floor(Math.random()*g.length);e.style.order=t}))},M=function(){p===g.length/2&&setTimeout((function(){l=!0,h(a),setTimeout((function(){v(a),C()}),3e3),clearInterval(I)}),1e3)},T=function(){b=!1,l=!1,E=null,L=null},C=function(){T(),p=0,g.forEach((function(e){return e.classList.remove("flip")})),x(),g.forEach((function(e){return e.addEventListener("click",k)})),G(),v(i),h(e),g.forEach((function(e){return e.removeEventListener("click",W)})),Q=0};g.forEach((function(e){return e.addEventListener("click",k)}));var I,Y=document.querySelector(".display"),A=function(){clearInterval(I);D(60);var e=Date.now()+6e4;I=setInterval((function(){var t=Math.round((e-Date.now())/1e3);if(t<0)return clearInterval(I),F(),void(p!==g.length/2&&H());D(t)}),1e3)},D=function(e){h(Y);var t=Math.floor(e/60),n=e%60,r="".concat(t,":").concat(n<10?"0":"").concat(n);Y.textContent=r},F=function(){Y.classList.add("vibrate")},G=function(){clearInterval(I),Y.textContent="",v(Y)},H=function(){l=!0,h(u),setTimeout((function(){Y.classList.remove("vibrate"),v(u),C()}),5e3)},N=document.querySelector(".card-container"),P=document.querySelector(".mix"),Q=0,W=function e(){p!==g.length/2?(10===Q&&(l=!0,j()),Q++,g.forEach((function(t){return t.addEventListener("click",e)}))):g.forEach((function(t){return t.removeEventListener("click",e)}))},j=function(){setTimeout((function(){N.classList.add("hide-and-change"),setTimeout((function(){h(P),x(),setTimeout((function(){l=!1,Q=0,v(P),N.classList.remove("hide-and-change")}),4e3)}),1e3)}),1e3)}})();